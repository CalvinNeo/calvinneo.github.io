[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from Election
[ RUN      ] Election.Normal
====Clearing
GRPC: Create channel between host 127.0.0.1:7100 and remote 127.0.0.1:7101
GRPC: Create channel between host 127.0.0.1:7100 and remote 127.0.0.1:7102
GRPC: Create channel between host 127.0.0.1:7100 and remote 127.0.0.1:7103
GRPC: Create channel between host 127.0.0.1:7100 and remote 127.0.0.1:7104
GRPC: Create channel between host 127.0.0.1:7101 and remote 127.0.0.1:7100
GRPC: Create channel between host 127.0.0.1:7101 and remote 127.0.0.1:7102
GRPC: Create channel between host 127.0.0.1:7101 and remote 127.0.0.1:7103
GRPC: Create channel between host 127.0.0.1:7101 and remote 127.0.0.1:7104
GRPC: Create channel between host 127.0.0.1:7102 and remote 127.0.0.1:7100
GRPC: Create channel between host 127.0.0.1:7102 and remote 127.0.0.1:7101
GRPC: Create channel between host 127.0.0.1:7102 and remote 127.0.0.1:7103
GRPC: Create channel between host 127.0.0.1:7102 and remote 127.0.0.1:7104
GRPC: Create channel between host 127.0.0.1:7103 and remote 127.0.0.1:7100
GRPC: Create channel between host 127.0.0.1:7103 and remote 127.0.0.1:7101
GRPC: Create channel between host 127.0.0.1:7103 and remote 127.0.0.1:7102
GRPC: Create channel between host 127.0.0.1:7103 and remote 127.0.0.1:7104
GRPC: Create channel between host 127.0.0.1:7104 and remote 127.0.0.1:7100
GRPC: Create channel between host 127.0.0.1:7104 and remote 127.0.0.1:7101
GRPC: Create channel between host 127.0.0.1:7104 and remote 127.0.0.1:7102
GRPC: Create channel between host 127.0.0.1:7104 and remote 127.0.0.1:7103
Start node. Switch state to Follower.
GRPC: Listen to 127.0.0.1:7100
Start node. Switch state to Follower.
GRPC: Listen to 127.0.0.1:7101
Start node. Switch state to Follower.
GRPC: Listen to 127.0.0.1:7102
Start node. Switch state to Follower.
GRPC: Listen to 127.0.0.1:7103
Start node. Switch state to Follower.
GRPC: Listen to 127.0.0.1:7104
// 7103开始竞选
Lost Leader of (). Start election term: 1, will timeout in 3000 ms.
Send RequestVoteRequest from 127.0.0.1:7103 to 127.0.0.1:7100
Send RequestVoteRequest from 127.0.0.1:7103 to 127.0.0.1:7101
Send RequestVoteRequest from 127.0.0.1:7103 to 127.0.0.1:7102
Send RequestVoteRequest from 127.0.0.1:7103 to 127.0.0.1:7104
// 7100开始竞选
Lost Leader of (). Start election term: 1, will timeout in 3000 ms.
Send RequestVoteRequest from 127.0.0.1:7100 to 127.0.0.1:7101
Send RequestVoteRequest from 127.0.0.1:7100 to 127.0.0.1:7102
Send RequestVoteRequest from 127.0.0.1:7100 to 127.0.0.1:7103
Send RequestVoteRequest from 127.0.0.1:7100 to 127.0.0.1:7104
GRPC: Receive RequestVoteRequest from Peer ipv4:127.0.0.1:43734 Name 127.0.0.1:7100
Become Follower(127.0.0.1:7104): Receive RequestVoteRequest from 127.0.0.1:7100 with new term of 1, me 0.
Respond from 127.0.0.1:7104 to 127.0.0.1:7100 with YES
GRPC: Receive RequestVoteRequest from Peer ipv4:127.0.0.1:43734 Name 127.0.0.1:7103
Become Follower(127.0.0.1:7104): Receive RequestVoteRequest from 127.0.0.1:7103 with new term of 1, me 0.
Receive vote from 127.0.0.1:7104 = YES
GRPC: Receive RequestVoteRequest from Peer ipv4:127.0.0.1:38656 Name 127.0.0.1:7103
Become Follower(127.0.0.1:7101): Receive RequestVoteRequest from 127.0.0.1:7103 with new term of 1, me 0.
Respond from 127.0.0.1:7101 to 127.0.0.1:7103 with YES
Receive vote from 127.0.0.1:7101 = YES
GRPC: Receive RequestVoteRequest from Peer ipv4:127.0.0.1:38106 Name 127.0.0.1:7103
Become Follower(127.0.0.1:7102): Receive RequestVoteRequest from 127.0.0.1:7103 with new term of 1, me 0.
Respond from 127.0.0.1:7102 to 127.0.0.1:7103 with YES
Receive vote from 127.0.0.1:7102 = YES
// 7103胜选
Now I(127.0.0.1:7103) am the Leader of term 1, because I got 3 votes.
Respond from 127.0.0.1:7104 to 127.0.0.1:7103 with YES
GRPC: Receive RequestVoteRequest from Peer ipv4:127.0.0.1:49612 Name 127.0.0.1:7100
Respond from 127.0.0.1:7103 to 127.0.0.1:7100 with YES
GRPC: Receive RequestVoteRequest from Peer ipv4:127.0.0.1:38106 Name 127.0.0.1:7100
Become Follower(127.0.0.1:7102): Receive RequestVoteRequest from 127.0.0.1:7100 with new term of 1, me 0.
Respond from 127.0.0.1:7102 to 127.0.0.1:7100 with YES
Receive vote from 127.0.0.1:7102 = YES
Now I(127.0.0.1:7100) am the Leader of term 1, because I got 3 votes.
GRPC: Receive RequestVoteRequest from Peer ipv4:127.0.0.1:47222 Name 127.0.0.1:7103
Respond from 127.0.0.1:7100 to 127.0.0.1:7103 with YES
GRPC: Receive RequestVoteRequest from Peer ipv4:127.0.0.1:38656 Name 127.0.0.1:7100
Become Follower(127.0.0.1:7101): Receive RequestVoteRequest from 127.0.0.1:7100 with new term of 1, me 0.
Respond from 127.0.0.1:7101 to 127.0.0.1:7100 with YES
Become Follower: Receive AppendEntriesRequest from 127.0.0.1:7103 with newer term 1, me 0.
Become Follower: Receive AppendEntriesRequest from 127.0.0.1:7103 with newer term 1, me 0.
Become Follower: Receive AppendEntriesRequest from 127.0.0.1:7103 with newer term 1, me 0.
src/test/test.cpp:172: Failure
      Expected: leader_cnt
      Which is: 2
To be equal to: 1
[  FAILED  ] Election.Normal (2016 ms)
[----------] 1 test from Election (2016 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (2016 ms total)
[  PASSED  ] 0 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] Election.Normal
