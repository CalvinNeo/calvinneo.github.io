Note: Google Test filter = Commit.LeaderChange
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from Commit
[ RUN      ] Commit.LeaderChange
=== Clearing 0
RaftLog[5, 2513](src/node.h:624@add_peer) [Me=127.0.0.1:7100,Leader=]: Add Peer 127.0.0.1:7101. Now size 0
RaftLog[5, 2513](src/node.h:624@add_peer) [Me=127.0.0.1:7100,Leader=]: Add Peer 127.0.0.1:7102. Now size 1
RaftLog[5, 2514](src/node.h:624@add_peer) [Me=127.0.0.1:7100,Leader=]: Add Peer 127.0.0.1:7103. Now size 2
RaftLog[5, 2514](src/node.h:624@add_peer) [Me=127.0.0.1:7100,Leader=]: Add Peer 127.0.0.1:7104. Now size 3
RaftLog[5, 2514](src/node.h:624@add_peer) [Me=127.0.0.1:7101,Leader=]: Add Peer 127.0.0.1:7100. Now size 0
RaftLog[5, 2514](src/node.h:624@add_peer) [Me=127.0.0.1:7101,Leader=]: Add Peer 127.0.0.1:7102. Now size 1
RaftLog[5, 2514](src/node.h:624@add_peer) [Me=127.0.0.1:7101,Leader=]: Add Peer 127.0.0.1:7103. Now size 2
RaftLog[5, 2514](src/node.h:624@add_peer) [Me=127.0.0.1:7101,Leader=]: Add Peer 127.0.0.1:7104. Now size 3
RaftLog[5, 2514](src/node.h:624@add_peer) [Me=127.0.0.1:7102,Leader=]: Add Peer 127.0.0.1:7100. Now size 0
RaftLog[5, 2514](src/node.h:624@add_peer) [Me=127.0.0.1:7102,Leader=]: Add Peer 127.0.0.1:7101. Now size 1
RaftLog[5, 2515](src/node.h:624@add_peer) [Me=127.0.0.1:7102,Leader=]: Add Peer 127.0.0.1:7103. Now size 2
RaftLog[5, 2515](src/node.h:624@add_peer) [Me=127.0.0.1:7102,Leader=]: Add Peer 127.0.0.1:7104. Now size 3
RaftLog[5, 2515](src/node.h:624@add_peer) [Me=127.0.0.1:7103,Leader=]: Add Peer 127.0.0.1:7100. Now size 0
RaftLog[5, 2515](src/node.h:624@add_peer) [Me=127.0.0.1:7103,Leader=]: Add Peer 127.0.0.1:7101. Now size 1
RaftLog[5, 2515](src/node.h:624@add_peer) [Me=127.0.0.1:7103,Leader=]: Add Peer 127.0.0.1:7102. Now size 2
RaftLog[5, 2515](src/node.h:624@add_peer) [Me=127.0.0.1:7103,Leader=]: Add Peer 127.0.0.1:7104. Now size 3
RaftLog[5, 2515](src/node.h:624@add_peer) [Me=127.0.0.1:7104,Leader=]: Add Peer 127.0.0.1:7100. Now size 0
RaftLog[5, 2515](src/node.h:624@add_peer) [Me=127.0.0.1:7104,Leader=]: Add Peer 127.0.0.1:7101. Now size 1
RaftLog[5, 2515](src/node.h:624@add_peer) [Me=127.0.0.1:7104,Leader=]: Add Peer 127.0.0.1:7102. Now size 2
RaftLog[5, 2516](src/node.h:624@add_peer) [Me=127.0.0.1:7104,Leader=]: Add Peer 127.0.0.1:7103. Now size 3
RaftLog[5, 2516](src/test/../node.h:519@run) [Me=127.0.0.1:7100,Leader=]: Run node. Switch state to Follower.
RaftLog[5, 2517](src/test/../node.h:519@run) [Me=127.0.0.1:7101,Leader=]: Run node. Switch state to Follower.
RaftLog[5, 2517](src/test/../node.h:519@run) [Me=127.0.0.1:7102,Leader=]: Run node. Switch state to Follower.
RaftLog[5, 2518](src/test/../node.h:519@run) [Me=127.0.0.1:7103,Leader=]: Run node. Switch state to Follower.
RaftLog[5, 2519](src/test/../node.h:519@run) [Me=127.0.0.1:7104,Leader=]: Run node. Switch state to Follower.
           Name        State  Term  log size  commit lastapp   peers    run  trans
 127.0.0.1:7100     Follower     0         0      -1      -1       4      T      0
 127.0.0.1:7101     Follower     0         0      -1      -1       4      T      0
 127.0.0.1:7102     Follower     0         0      -1      -1       4      T      0
 127.0.0.1:7103     Follower     0         0      -1      -1       4      T      0
 127.0.0.1:7104     Follower     0         0      -1      -1       4      T      0
GTEST: WaitElection ob 127.0.0.1:7100
RaftLog[5, 3013](src/node.h:904@do_election) [Me=127.0.0.1:7101,Leader=]: Lost Leader of (). Start election term: 1, will timeout in 550 ms.
RaftLog[5, 3014](src/node.h:920@do_election) [Me=127.0.0.1:7101,Leader=]: Send RequestVoteRequest from 127.0.0.1:7101 to 127.0.0.1:7100
RaftLog[5, 3016](src/node.h:920@do_election) [Me=127.0.0.1:7101,Leader=]: Send RequestVoteRequest from 127.0.0.1:7101 to 127.0.0.1:7102
RaftLog[5, 3016](src/node.h:920@do_election) [Me=127.0.0.1:7101,Leader=]: Send RequestVoteRequest from 127.0.0.1:7101 to 127.0.0.1:7103
RaftLog[5, 3017](src/node.h:920@do_election) [Me=127.0.0.1:7101,Leader=]: Send RequestVoteRequest from 127.0.0.1:7101 to 127.0.0.1:7104
RaftLog[5, 3014](src/node.h:904@do_election) [Me=127.0.0.1:7104,Leader=]: Lost Leader of (). Start election term: 1, will timeout in 550 ms.
RaftLog[5, 3019](src/node.h:920@do_election) [Me=127.0.0.1:7104,Leader=]: Send RequestVoteRequest from 127.0.0.1:7104 to 127.0.0.1:7100
RaftLog[5, 3019](src/node.h:920@do_election) [Me=127.0.0.1:7104,Leader=]: Send RequestVoteRequest from 127.0.0.1:7104 to 127.0.0.1:7101
RaftLog[5, 3020](src/node.h:920@do_election) [Me=127.0.0.1:7104,Leader=]: Send RequestVoteRequest from 127.0.0.1:7104 to 127.0.0.1:7102
RaftLog[5, 3020](src/node.h:920@do_election) [Me=127.0.0.1:7104,Leader=]: Send RequestVoteRequest from 127.0.0.1:7104 to 127.0.0.1:7103
RaftLog[5, 3015](src/node.h:904@do_election) [Me=127.0.0.1:7100,Leader=]: Lost Leader of (). Start election term: 1, will timeout in 550 ms.
RaftLog[5, 3022](src/node.h:920@do_election) [Me=127.0.0.1:7100,Leader=]: Send RequestVoteRequest from 127.0.0.1:7100 to 127.0.0.1:7101
RaftLog[5, 3022](src/node.h:920@do_election) [Me=127.0.0.1:7100,Leader=]: Send RequestVoteRequest from 127.0.0.1:7100 to 127.0.0.1:7102
RaftLog[5, 3023](src/node.h:920@do_election) [Me=127.0.0.1:7100,Leader=]: Send RequestVoteRequest from 127.0.0.1:7100 to 127.0.0.1:7103
RaftLog[5, 3026](src/node.h:920@do_election) [Me=127.0.0.1:7100,Leader=]: Send RequestVoteRequest from 127.0.0.1:7100 to 127.0.0.1:7104
RaftLog[5, 3026](src/node.h:948@on_vote_request) [Me=127.0.0.1:7102,Leader=]: Become Follower: Receive RequestVoteRequest from 127.0.0.1:7101 with new term of 1, me 0.
RaftLog[5, 3029](src/node.h:987@on_vote_request) [Me=127.0.0.1:7102,Leader=]: Respond from 127.0.0.1:7102 to 127.0.0.1:7101 with YES
RaftLog[5, 3034](src/node.h:965@on_vote_request) [Me=127.0.0.1:7104,Leader=]: Reject RequestVoteRequest because I already vote for 127.0.0.1:7104.
RaftLog[5, 3034](src/node.h:987@on_vote_request) [Me=127.0.0.1:7104,Leader=]: Respond from 127.0.0.1:7104 to 127.0.0.1:7101 with NO
RaftLog[5, 3036](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7101,Leader=]: Receive vote from 127.0.0.1:7104 = NO
RaftLog[5, 3036](src/node.h:965@on_vote_request) [Me=127.0.0.1:7100,Leader=]: Reject RequestVoteRequest because I already vote for 127.0.0.1:7100.
RaftLog[5, 3036](src/node.h:987@on_vote_request) [Me=127.0.0.1:7100,Leader=]: Respond from 127.0.0.1:7100 to 127.0.0.1:7101 with NO
RaftLog[5, 3037](src/node.h:965@on_vote_request) [Me=127.0.0.1:7101,Leader=]: Reject RequestVoteRequest because I already vote for 127.0.0.1:7101.
RaftLog[5, 3038](src/node.h:987@on_vote_request) [Me=127.0.0.1:7101,Leader=]: Respond from 127.0.0.1:7101 to 127.0.0.1:7104 with NO
RaftLog[5, 3041](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7104,Leader=]: Receive vote from 127.0.0.1:7101 = NO
RaftLog[5, 3042](src/node.h:948@on_vote_request) [Me=127.0.0.1:7103,Leader=]: Become Follower: Receive RequestVoteRequest from 127.0.0.1:7104 with new term of 1, me 0.
RaftLog[5, 3042](src/node.h:987@on_vote_request) [Me=127.0.0.1:7103,Leader=]: Respond from 127.0.0.1:7103 to 127.0.0.1:7104 with YES
RaftLog[5, 3043](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7104,Leader=]: Receive vote from 127.0.0.1:7103 = YES
RaftLog[5, 3044](src/node.h:965@on_vote_request) [Me=127.0.0.1:7103,Leader=]: Reject RequestVoteRequest because I already vote for 127.0.0.1:7104.
RaftLog[5, 3044](src/node.h:987@on_vote_request) [Me=127.0.0.1:7103,Leader=]: Respond from 127.0.0.1:7103 to 127.0.0.1:7100 with NO
RaftLog[5, 3044](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7101,Leader=]: Receive vote from 127.0.0.1:7100 = NO
RaftLog[5, 3045](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7100,Leader=]: Receive vote from 127.0.0.1:7103 = NO
RaftLog[5, 3045](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7101,Leader=]: Receive vote from 127.0.0.1:7102 = YES
RaftLog[5, 3045](src/node.h:965@on_vote_request) [Me=127.0.0.1:7104,Leader=]: Reject RequestVoteRequest because I already vote for 127.0.0.1:7104.
RaftLog[5, 3045](src/node.h:987@on_vote_request) [Me=127.0.0.1:7104,Leader=]: Respond from 127.0.0.1:7104 to 127.0.0.1:7100 with NO
RaftLog[5, 3046](src/node.h:965@on_vote_request) [Me=127.0.0.1:7101,Leader=]: Reject RequestVoteRequest because I already vote for 127.0.0.1:7101.
RaftLog[5, 3046](src/node.h:987@on_vote_request) [Me=127.0.0.1:7101,Leader=]: Respond from 127.0.0.1:7101 to 127.0.0.1:7100 with NO
RaftLog[5, 3047](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7100,Leader=]: Receive vote from 127.0.0.1:7101 = NO
RaftLog[5, 3047](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7100,Leader=]: Receive vote from 127.0.0.1:7104 = NO
RaftLog[5, 3047](src/node.h:965@on_vote_request) [Me=127.0.0.1:7103,Leader=]: Reject RequestVoteRequest because I already vote for 127.0.0.1:7104.
RaftLog[5, 3047](src/node.h:987@on_vote_request) [Me=127.0.0.1:7103,Leader=]: Respond from 127.0.0.1:7103 to 127.0.0.1:7101 with NO
RaftLog[5, 3047](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7101,Leader=]: Receive vote from 127.0.0.1:7103 = NO
RaftLog[5, 3048](src/node.h:965@on_vote_request) [Me=127.0.0.1:7100,Leader=]: Reject RequestVoteRequest because I already vote for 127.0.0.1:7100.
RaftLog[5, 3048](src/node.h:987@on_vote_request) [Me=127.0.0.1:7100,Leader=]: Respond from 127.0.0.1:7100 to 127.0.0.1:7104 with NO
RaftLog[5, 3048](src/node.h:965@on_vote_request) [Me=127.0.0.1:7102,Leader=]: Reject RequestVoteRequest because I already vote for 127.0.0.1:7101.
RaftLog[5, 3048](src/node.h:987@on_vote_request) [Me=127.0.0.1:7102,Leader=]: Respond from 127.0.0.1:7102 to 127.0.0.1:7100 with NO
RaftLog[5, 3048](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7100,Leader=]: Receive vote from 127.0.0.1:7102 = NO
RaftLog[5, 3048](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7104,Leader=]: Receive vote from 127.0.0.1:7100 = NO
RaftLog[5, 3049](src/node.h:965@on_vote_request) [Me=127.0.0.1:7102,Leader=]: Reject RequestVoteRequest because I already vote for 127.0.0.1:7101.
RaftLog[5, 3049](src/node.h:987@on_vote_request) [Me=127.0.0.1:7102,Leader=]: Respond from 127.0.0.1:7102 to 127.0.0.1:7104 with NO
RaftLog[5, 3049](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7104,Leader=]: Receive vote from 127.0.0.1:7102 = NO
RaftLog[5, 3536](src/node.h:904@do_election) [Me=127.0.0.1:7103,Leader=]: Lost Leader of (). Start election term: 2, will timeout in 550 ms.
RaftLog[5, 3536](src/node.h:920@do_election) [Me=127.0.0.1:7103,Leader=]: Send RequestVoteRequest from 127.0.0.1:7103 to 127.0.0.1:7100
RaftLog[5, 3536](src/node.h:920@do_election) [Me=127.0.0.1:7103,Leader=]: Send RequestVoteRequest from 127.0.0.1:7103 to 127.0.0.1:7101
RaftLog[5, 3536](src/node.h:920@do_election) [Me=127.0.0.1:7103,Leader=]: Send RequestVoteRequest from 127.0.0.1:7103 to 127.0.0.1:7102
RaftLog[5, 3536](src/node.h:920@do_election) [Me=127.0.0.1:7103,Leader=]: Send RequestVoteRequest from 127.0.0.1:7103 to 127.0.0.1:7104
RaftLog[5, 3536](src/node.h:948@on_vote_request) [Me=127.0.0.1:7102,Leader=]: Become Follower: Receive RequestVoteRequest from 127.0.0.1:7103 with new term of 2, me 1.
RaftLog[5, 3536](src/node.h:987@on_vote_request) [Me=127.0.0.1:7102,Leader=]: Respond from 127.0.0.1:7102 to 127.0.0.1:7103 with YES
RaftLog[5, 3537](src/node.h:948@on_vote_request) [Me=127.0.0.1:7104,Leader=]: Become Follower: Receive RequestVoteRequest from 127.0.0.1:7103 with new term of 2, me 1.
RaftLog[5, 3537](src/node.h:987@on_vote_request) [Me=127.0.0.1:7104,Leader=]: Respond from 127.0.0.1:7104 to 127.0.0.1:7103 with YES
RaftLog[5, 3537](src/node.h:948@on_vote_request) [Me=127.0.0.1:7101,Leader=]: Become Follower: Receive RequestVoteRequest from 127.0.0.1:7103 with new term of 2, me 1.
RaftLog[5, 3537](src/node.h:987@on_vote_request) [Me=127.0.0.1:7101,Leader=]: Respond from 127.0.0.1:7101 to 127.0.0.1:7103 with YES
RaftLog[5, 3537](src/node.h:948@on_vote_request) [Me=127.0.0.1:7100,Leader=]: Become Follower: Receive RequestVoteRequest from 127.0.0.1:7103 with new term of 2, me 1.
RaftLog[5, 3537](src/node.h:987@on_vote_request) [Me=127.0.0.1:7100,Leader=]: Respond from 127.0.0.1:7100 to 127.0.0.1:7103 with YES
RaftLog[5, 3538](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7103,Leader=]: Receive vote from 127.0.0.1:7102 = YES
RaftLog[5, 3538](src/node.h:1012@on_vote_response) [Me=127.0.0.1:7103,Leader=]: Receive vote from 127.0.0.1:7104 = YES
RaftLog[5, 3538](src/node.h:722@become_leader) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Now I am the Leader of term 2, because I got 3 votes.
GTEST: WaitElection Finish with 7.
RaftLog[5, 4575](src/test/../node.h:1494@do_log) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Append LOCAL log Index 0, Term 2, commit_index -1. Now copy to peers.
RaftLog[5, 4575](src/node.h:1067@do_append_entries) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Copy to peer 127.0.0.1:7100 LogEntries[0, 0]
RaftLog[5, 4575](src/node.h:1081@do_append_entries) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Send normal AppendEntriesRequest to 127.0.0.1:7100, size 1 term 2.
RaftLog[5, 4575](src/node.h:1067@do_append_entries) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Copy to peer 127.0.0.1:7101 LogEntries[0, 0]
RaftLog[5, 4575](src/node.h:1081@do_append_entries) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Send normal AppendEntriesRequest to 127.0.0.1:7101, size 1 term 2.
RaftLog[5, 4576](src/node.h:1067@do_append_entries) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Copy to peer 127.0.0.1:7102 LogEntries[0, 0]
RaftLog[5, 4576](src/node.h:1081@do_append_entries) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Send normal AppendEntriesRequest to 127.0.0.1:7102, size 1 term 2.
RaftLog[5, 4576](src/node.h:1067@do_append_entries) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Copy to peer 127.0.0.1:7104 LogEntries[0, 0]
RaftLog[5, 4576](src/node.h:1081@do_append_entries) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Send normal AppendEntriesRequest to 127.0.0.1:7104, size 1 term 2.
RaftLog[5, 4576](src/node.h:1230@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: My commit_index remain -1, because it's GE than Leader's commit -1, entries_size = 1. last_log_index = 0
RaftLog[5, 4577](src/node.h:1230@on_append_entries_request) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: My commit_index remain -1, because it's GE than Leader's commit -1, entries_size = 1. last_log_index = 0
RaftLog[5, 4577](src/node.h:1438@on_append_entries_response) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Can't advance commit_index to 0 because of inadequate votes of 2.
RaftLog[5, 4577](src/node.h:1230@on_append_entries_request) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: My commit_index remain -1, because it's GE than Leader's commit -1, entries_size = 1. last_log_index = 0
RaftLog[5, 4577](src/node.h:1230@on_append_entries_request) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: My commit_index remain -1, because it's GE than Leader's commit -1, entries_size = 1. last_log_index = 0
RaftLog[5, 4578](src/node.h:1431@on_append_entries_response) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Advance commit_index from -1 to 0 with vote 3.
RaftLog[5, 4578](src/node.h:674@do_apply) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Do apply from 0 to 0
RaftLog[5, 4578](src/node.h:1350@on_append_entries_response) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Peer(127.0.0.1:7101) grants NO commit vote. Peer's last_log_index(0) can't contribute to Leader's (0), there's NOTHING to commit.
RaftLog[5, 4578](src/node.h:1350@on_append_entries_response) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Peer(127.0.0.1:7100) grants NO commit vote. Peer's last_log_index(0) can't contribute to Leader's (0), there's NOTHING to commit.
RaftLog[5, 4583](src/node.h:1226@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Leader 127.0.0.1:7103 ask me to advance commit_index to 0.
RaftLog[5, 4583](src/node.h:1226@on_append_entries_request) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: Leader 127.0.0.1:7103 ask me to advance commit_index to 0.
RaftLog[5, 4583](src/node.h:1226@on_append_entries_request) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: Leader 127.0.0.1:7103 ask me to advance commit_index to 0.
RaftLog[5, 4584](src/node.h:1226@on_append_entries_request) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: Leader 127.0.0.1:7103 ask me to advance commit_index to 0.
           Name        State  Term  log size  commit lastapp   peers    run  trans
 127.0.0.1:7100     Follower     2         1       0      -1       4      T      0
 127.0.0.1:7101     Follower     2         1       0      -1       4      T      0
 127.0.0.1:7102     Follower     2         1       0      -1       4      T      0
 127.0.0.1:7103       Leader     2         1       0       0       4      T      0
 127.0.0.1:7104     Follower     2         1       0      -1       4      T      0
GTEST: START Network Partition
GTEST: In DisconnectAfterReplicateTo: Mute 0;1;2;3
RaftLog[5, 5669](src/test/../node.h:1494@do_log) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Append LOCAL log Index 1, Term 2, commit_index 0. Now copy to peers.
// 由于Mute，只复制给7104
RaftLog[5, 5669](src/node.h:1067@do_append_entries) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Copy to peer 127.0.0.1:7104 LogEntries[1, 1]
RaftLog[5, 5669](src/node.h:1081@do_append_entries) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Send normal AppendEntriesRequest to 127.0.0.1:7104, size 1 term 2.
// 为啥这里顺序能颠倒，原因是线程池实现的是vector，乱序执行了
RaftLog[5, 5671](src/node.h:1230@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: My commit_index remain 0, because it's GE than Leader's commit 0, entries_size = 1. last_log_index = 1

RaftLog[5, 5671](src/node.h:1212@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Erase [1, ), last_log_index 1, prev_log_index 0
RaftLog[5, 5672](src/node.h:1214@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Insert size 1
RaftLog[5, 5672](src/node.h:1230@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: My commit_index remain 0, because it's GE than Leader's commit 0, entries_size = 1. last_log_index = 1
RaftLog[5, 5672](src/node.h:1438@on_append_entries_response) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Can't advance commit_index to 1 because of inadequate votes of 2.

// 这里实际上是之前的一个心跳包
RaftLog[5, 5808](src/node.h:1212@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Erase [1, ), last_log_index 1, prev_log_index 0
RaftLog[5, 5808](src/node.h:1214@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Insert size 0
RaftLog[5, 5809](src/node.h:1438@on_append_entries_response) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Can't advance commit_index to 1 because of inadequate votes of 2.
RaftLog[5, 5894](src/node.h:557@stop_unguarded) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Stop node of 127.0.0.1:7103
GTEST: Crash
           Name        State  Term  log size  commit lastapp   peers    run  trans
 127.0.0.1:7100     Follower     2         1       0      -1       4      T      0
 127.0.0.1:7101     Follower     2         1       0      -1       4      T      0
 127.0.0.1:7102     Follower     2         1       0      -1       4      T      0
 127.0.0.1:7103       Leader     2         2       0       0       4      F      0
 127.0.0.1:7104     Follower     2         1       0      -1       4      T      0
GTEST: In CheckCommit: 127.0.0.1:7103 is not running.
RaftLog[5, 5937](src/node.h:1174@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: AppendEntries fail. I don't have prev_log_index = 1, my last_log_index = 0.
RaftLog[5, 5938](src/node.h:1174@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: AppendEntries fail. I don't have prev_log_index = 1, my last_log_index = 0.
RaftLog[5, 5938](src/node.h:1302@on_append_entries_response) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Peer 127.0.0.1:7104 returns AppendEntriesResponse: FAILED
RaftLog[5, 5938](src/node.h:1174@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: AppendEntries fail. I don't have prev_log_index = 1, my last_log_index = 0.
RaftLog[5, 5939](src/node.h:1174@on_append_entries_request) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: AppendEntries fail. I don't have prev_log_index = 1, my last_log_index = 0.
RaftLog[5, 5938](src/node.h:1302@on_append_entries_response) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Peer 127.0.0.1:7104 returns AppendEntriesResponse: FAILED
RaftLog[5, 5940](src/node.h:1302@on_append_entries_response) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Peer 127.0.0.1:7104 returns AppendEntriesResponse: FAILED
GTEST: In CheckCommit: 127.0.0.1:7100 have no 1 log.
GTEST: In CheckCommit: 127.0.0.1:7101 have no 1 log.
GTEST: In CheckCommit: 127.0.0.1:7102 have no 1 log.
GTEST: In CheckCommit: 127.0.0.1:7103 is not running.
RaftLog[5, 5940](src/node.h:1302@on_append_entries_response) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Peer 127.0.0.1:7104 returns AppendEntriesResponse: FAILED
GTEST: In CheckCommit: 127.0.0.1:7104 have no 1 log.
GTEST: CheckCommit: 127.0.0.1:7100 have no 1 log.
GTEST: CheckCommit: 127.0.0.1:7101 have no 1 log.
GTEST: CheckCommit: 127.0.0.1:7102 have no 1 log.
GTEST: CheckCommit: 127.0.0.1:7103 is not running.
GTEST: CheckCommit: 127.0.0.1:7104 have no 1 log.
src/test/test.cpp:694: Failure
Value of: 1
Expected: CheckLog(1, "2")
Which is: 0
[  FAILED  ] Commit.LeaderChange (4430 ms)
[----------] 1 test from Commit (4430 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (4430 ms total)
[  PASSED  ] 0 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] Commit.LeaderChange

 1 FAILED TEST
=== Clearing 5
=== Deleting 127.0.0.1:7100
RaftLog[5, 5941](src/test/../node.h:1725@~RaftNode) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: Destruct RaftNode.
RaftLog[5, 5941](src/test/../node.h:1731@~RaftNode) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: Reset Peers 
RaftLog[5, 5941](src/node.h:638@remove_peer) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7101 from cluster.
RaftLog[5, 5941](src/node.h:638@remove_peer) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7102 from cluster.
RaftLog[5, 5941](src/node.h:638@remove_peer) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7103 from cluster.
RaftLog[5, 5941](src/node.h:638@remove_peer) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7104 from cluster.
RaftLog[5, 5941](src/test/../node.h:1734@~RaftNode) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: Delete Server
Wait shutdown
Joined
RaftLog[5, 5943](src/test/../node.h:1740@~RaftNode) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: Wait join
RaftLog[5, 5945](src/test/../node.h:1742@~RaftNode) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: Joined
RaftLog[5, 5945](src/test/../node.h:1757@~RaftNode) [Me=127.0.0.1:7100,Leader=127.0.0.1:7103]: Destruct finish
=== Deleting 127.0.0.1:7101
RaftLog[5, 5946](src/test/../node.h:1725@~RaftNode) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: Destruct RaftNode.
RaftLog[5, 5946](src/test/../node.h:1731@~RaftNode) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: Reset Peers 
RaftLog[5, 5946](src/node.h:638@remove_peer) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7100 from cluster.
RaftLog[5, 5946](src/node.h:638@remove_peer) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7102 from cluster.
RaftLog[5, 5946](src/node.h:638@remove_peer) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7103 from cluster.
RaftLog[5, 5946](src/node.h:638@remove_peer) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7104 from cluster.
RaftLog[5, 5946](src/test/../node.h:1734@~RaftNode) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: Delete Server
Wait shutdown
Joined
RaftLog[5, 5947](src/test/../node.h:1740@~RaftNode) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: Wait join
RaftLog[5, 5970](src/test/../node.h:1742@~RaftNode) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: Joined
RaftLog[5, 5970](src/test/../node.h:1757@~RaftNode) [Me=127.0.0.1:7101,Leader=127.0.0.1:7103]: Destruct finish
=== Deleting 127.0.0.1:7102
RaftLog[5, 5970](src/test/../node.h:1725@~RaftNode) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: Destruct RaftNode.
RaftLog[5, 5970](src/test/../node.h:1731@~RaftNode) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: Reset Peers 
RaftLog[5, 5970](src/node.h:638@remove_peer) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7100 from cluster.
RaftLog[5, 5971](src/node.h:638@remove_peer) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7101 from cluster.
RaftLog[5, 5971](src/node.h:638@remove_peer) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7103 from cluster.
RaftLog[5, 5971](src/node.h:638@remove_peer) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7104 from cluster.
RaftLog[5, 5971](src/test/../node.h:1734@~RaftNode) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: Delete Server
Wait shutdown
Joined
RaftLog[5, 5971](src/test/../node.h:1740@~RaftNode) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: Wait join
RaftLog[5, 6000](src/test/../node.h:1742@~RaftNode) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: Joined
RaftLog[5, 6000](src/test/../node.h:1757@~RaftNode) [Me=127.0.0.1:7102,Leader=127.0.0.1:7103]: Destruct finish
=== Deleting 127.0.0.1:7104
RaftLog[5, 6000](src/test/../node.h:1725@~RaftNode) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Destruct RaftNode.
RaftLog[5, 6000](src/test/../node.h:1731@~RaftNode) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Reset Peers 
RaftLog[5, 6000](src/node.h:638@remove_peer) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7100 from cluster.
RaftLog[5, 6000](src/node.h:638@remove_peer) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7101 from cluster.
RaftLog[5, 6000](src/node.h:638@remove_peer) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7102 from cluster.
RaftLog[5, 6000](src/node.h:638@remove_peer) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7103 from cluster.
RaftLog[5, 6000](src/test/../node.h:1734@~RaftNode) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Delete Server
Wait shutdown
Joined
RaftLog[5, 6001](src/test/../node.h:1740@~RaftNode) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Wait join
RaftLog[5, 6031](src/test/../node.h:1742@~RaftNode) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Joined
RaftLog[5, 6032](src/test/../node.h:1757@~RaftNode) [Me=127.0.0.1:7104,Leader=127.0.0.1:7103]: Destruct finish
=== Deleting 127.0.0.1:7103
RaftLog[5, 6032](src/test/../node.h:1725@~RaftNode) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Destruct RaftNode.
RaftLog[5, 6032](src/test/../node.h:1731@~RaftNode) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Reset Peers 
RaftLog[5, 6032](src/node.h:638@remove_peer) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7100 from cluster.
RaftLog[5, 6032](src/node.h:638@remove_peer) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7101 from cluster.
RaftLog[5, 6032](src/node.h:638@remove_peer) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7102 from cluster.
RaftLog[5, 6032](src/node.h:638@remove_peer) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Remove 127.0.0.1:7104 from cluster.
RaftLog[5, 6032](src/test/../node.h:1734@~RaftNode) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Delete Server
Wait shutdown
Joined
RaftLog[5, 6034](src/test/../node.h:1740@~RaftNode) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Wait join
RaftLog[5, 6043](src/test/../node.h:1742@~RaftNode) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Joined
RaftLog[5, 6044](src/test/../node.h:1757@~RaftNode) [Me=127.0.0.1:7103,Leader=127.0.0.1:7103]: Destruct finish
calvin@ubuntu:~/Desktop/Nuft$ 
